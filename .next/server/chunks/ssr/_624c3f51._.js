module.exports=[70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),d=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:d=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:d,height:d,stroke:a,strokeWidth:g?24*Number(f)/Number(d):f,className:c("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:c(`lucide-${d(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=d(a),g};a.s(["default",()=>g],70106)},68515,a=>{"use strict";let b,c,d,e;var f,g=a.i(72131);let h=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f};function i(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var d;let e=a=>null===a?null:JSON.parse(a,null==b?void 0:b.reviver),f=null!=(d=c.getItem(a))?d:null;return f instanceof Promise?f.then(e):e(f)},setItem:(a,d)=>c.setItem(a,JSON.stringify(d,null==b?void 0:b.replacer)),removeItem:a=>c.removeItem(a)}}let j=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>j(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>j(b)(a)}}},k=["Adrar","Chlef","Laghouat","Oum El Bouaghi","Batna","Béjaïa","Biskra","Bechar","Blida","Bouira","Tamanrasset","Tbessa","Tlemcen","Tiaret","Tizi Ouzou","Alger","Djelfa","Jijel","Se9tif","Saefda","Skikda","Sidi Bel Abbes","Annaba","Guelma","Constantine","Medea","Mostaganem","M'Sila","Mascara","Ouargla","Oran","El Bayadh","Illizi","Bordj Bou Arreridj","Boumerdes","El Tarf","Tindouf","Tissemsilt","El Oued","Khenchela","Souk Ahras","Tipaza","Mila","Ain Defla","Naama","Ain Temouchent","Ghardaefa","Relizane","El M'ghair","El Menia","Ouled Djellal","Bordj Baji Mokhtar","Béni Abbès","Timimoun","Touggourt","Djanet","In Salah","In Guezzam","Aflou","El Abiodh Sidi Cheikh","El Aricha","El Kantara","Barika","Bou Saada","Bir El Ater","Ksar El Boukhari","Ksar Chellala","Ain Oussara","Messaad"].reduce((a,b)=>(["Alger","Blida","Boumerdès","Tipaza","Oran","Constantine","Annaba","Sétif"].includes(b)?a[b]={home:600,bureau:350}:["Adrar","Tamanrasset","Illizi","Tindouf","Béchar","Ouargla","Ghardaïa"].includes(b)?a[b]={home:1e3,bureau:600}:a[b]={home:800,bureau:500},a),{}),l=[{id:"admin-default",email:"admin@dattes.dz",password:"admin",role:"admin",name:"Administrateur",wilaya:"Biskra",phone:"0000000000"}],m=(a,b)=>{if(!a)return 0;let c=["Alger","Blida","Boumerdès","Tipaza","Oran","Constantine","Annaba","Sétif"].includes(a),d=["Adrar","Tamanrasset","Illizi","Tindouf","Béchar","Ouargla","Ghardaïa"].includes(a);return"home"===b?c?600:d?1e3:800:c?350:d?600:500},n=[{id:"1",type:"Deglet Nour",quality:"Premium",pricePerKg:1200,stockKg:500,unit:"kg",packaging:"standard",images:["/products/deglet-nour.png"],description:"Dattes Deglet Nour de qualité supérieure, transparentes et mielleuses.",origin:"Tolga",longDescription:'La Deglet Nour ("Doigt de lumière") est la reine des dattes. Cette sélection Premium provient des meilleures palmeraies de Tolga. Sa texture est moelleuse, sa couleur translucide laisse apparaître le noyau, et son goût de miel est incomparable.',nutritionalInfo:{calories:282,carbs:75,protein:2.5,fiber:8},typeAr:"دقلة نور",qualityAr:"ممتاز",originAr:"طولقة",descriptionAr:"تمور دقلة نور عالية الجودة، شفافة ومعسلة."},{id:"2",type:"Deglet Nour",quality:"Standard",pricePerKg:850,stockKg:1e3,images:["/products/deglet-nour.png"],description:"Dattes Deglet Nour idéales pour la consommation quotidienne.",origin:"Biskra",longDescription:"Une Deglet Nour authentique, idéale pour le quotidien. Moins translucide que la Premium mais tout aussi savoureuse, elle offre un excellent rapport qualité-prix.",nutritionalInfo:{calories:280,carbs:74,protein:2.4,fiber:7.5},typeAr:"دقلة نور",qualityAr:"عادي",originAr:"بسكرة",descriptionAr:"تمور دقلة نور مثالية للاستهلاك اليومي."},{id:"3",type:"Ghars",quality:"Premium",pricePerKg:450,stockKg:300,images:["/products/ghars.png"],description:"Dattes écrasées (Ghars/Btana), parfaites pour la pâtisserie (Makroud, Bradj).",origin:"Oued Souf",longDescription:"Le Ghars est une datte moelleuse écrasée, formant une pâte naturelle riche et sucrée. Indispensable pour la préparation des gâteaux traditionnels algériens comme le Makroud et le Bradj.",typeAr:"غرس (بطانة)",qualityAr:"ممتاز",originAr:"الوادي",descriptionAr:"تمر مهروس (غرس/بطانة)، مثالي للحلويات (المقروط، البراج).",nutritionalInfo:{calories:300,carbs:80,protein:2.2,fiber:9}},{id:"4",type:"Deglet Beida",quality:"Standard",pricePerKg:600,stockKg:200,images:["/products/deglet-nour.png"],description:"Dattes sèches et croquantes, riches en fibres.",origin:"Tolga",longDescription:"La Deglet Beida est une datte sèche, très appréciée pour sa texture croquante et sa longue conservation.",typeAr:"دقلة بيضاء",qualityAr:"عادي",originAr:"طولقة",descriptionAr:"تمور دقلة بيضاء جافة ومقرمشة، غنية بالألياف.",nutritionalInfo:{calories:280,carbs:75,protein:2.5,fiber:8}},{id:"5",type:"Roub",quality:"Premium",pricePerKg:300,stockKg:100,images:["/products/deglet-nour.png"],description:"Dattes fraîches (Roub), très sucrées et fondantes.",origin:"Tolga",longDescription:"Le Roub est une datte fraîche, cueillie à mi-maturité. Elle est incroyablement fondante et sucrée, un véritable délice saisonnier.",typeAr:"رطب",qualityAr:"ممتاز",originAr:"طولقة",descriptionAr:"تمور رطب طازجة، حلوة جداً وتذوب في الفم.",unit:"kg",packaging:"standard",nutritionalInfo:{calories:260,carbs:65,protein:1.8,fiber:6}}],o=(d=(f=(b=(a,b)=>({_hasHydrated:!1,setHasHydrated:b=>a({_hasHydrated:b}),language:"fr",setLanguage:b=>a({language:b}),settings:{heroImage:"/hero-dates-v2.png",heroImageDesktop:"/hero-dates-desktop.jpg",deliveryFees:k},fetchSettings:async()=>{try{let b=await fetch("/api/settings");if(b.ok){let c=await b.json();a(a=>({settings:{...a.settings,...c}}))}}catch(a){console.error("Failed to fetch settings:",a)}},updateSettings:b=>{a(a=>{let c={...a.settings,...b};return fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(a=>console.error("Settings sync failed",a)),{settings:c}})},currentUser:null,users:l,login:(c,d)=>{let e=b().users.find(a=>a.email===c&&a.password===d);return!!e&&(a({currentUser:e}),!0)},logout:()=>a({currentUser:null}),register:c=>!b().users.some(a=>a.email===c.email)&&(a(a=>({users:[...a.users,{...c,id:crypto.randomUUID(),role:"customer"}]})),!0),cart:[],addToCart:b=>a(a=>{let c=a.cart.find(a=>a.productId===b.productId&&a.quality===b.quality&&a.unit===b.unit&&a.packaging===b.packaging);return c?{cart:a.cart.map(a=>a.id===c.id?{...a,quantityKg:a.quantityKg+b.quantityKg}:a)}:{cart:[...a.cart,b]}}),removeFromCart:b=>a(a=>({cart:a.cart.filter(a=>a.id!==b)})),updateQuantity:(b,c)=>a(a=>({cart:a.cart.map(a=>a.id===b?{...a,quantityKg:c}:a)})),clearCart:()=>a({cart:[]}),cartTotal:()=>b().cart.reduce((a,b)=>a+b.pricePerKg*b.quantityKg,0),calculateTotal:()=>b().cartTotal()+m(b().currentUser?.wilaya||"","home"),inventory:n,fetchInventory:async()=>{try{let b=await fetch("/api/products");if(b.ok){let c=await b.json();a({inventory:c})}}catch(a){console.error("Failed to fetch inventory:",a)}},updateInventory:b=>{a({inventory:b}),fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(a=>console.error("Sync failed",a))},orders:[],fetchOrders:async()=>{try{let b=await fetch("/api/orders");if(b.ok){let c=await b.json();a({orders:c})}}catch(a){console.error("Failed to fetch orders:",a)}},addOrder:c=>{a({orders:[c,...b().orders]}),fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).catch(a=>console.error("Order sync failed",a));let d=[...b().inventory];c.items.forEach(a=>{let b=d.findIndex(b=>b.id===a.productId);-1!==b&&(d[b]={...d[b],stockKg:Math.max(0,d[b].stockKg-a.quantityKg)})}),b().updateInventory(d)},updateOrderStatus:(b,c)=>a(a=>({orders:a.orders.map(a=>a.id===b?{...a,status:c}:a)})),updateOrderReturn:(b,c)=>a(a=>({orders:a.orders.map(a=>a.id===b?{...a,status:"returned",returnReason:c}:a)})),updateUser:b=>a(a=>({currentUser:a.currentUser?{...a.currentUser,...b}:null,users:a.users.map(c=>c.id===a.currentUser?.id?{...c,...b}:c)})),totalVisits:0,incrementVisits:()=>a(a=>({totalVisits:a.totalVisits+1})),analyticsData:{traffic:[{name:"Lun",value:400},{name:"Mar",value:300},{name:"Mer",value:550},{name:"Jeu",value:450},{name:"Ven",value:600},{name:"Sam",value:700},{name:"Dim",value:500}],conversion:[{name:"Lun",value:24},{name:"Mar",value:18},{name:"Mer",value:35},{name:"Jeu",value:28},{name:"Ven",value:42},{name:"Sam",value:48},{name:"Dim",value:38}]},updateAnalyticsData:b=>a(a=>({analyticsData:{...a.analyticsData,...b}})),referralSource:"",setReferralSource:b=>a({referralSource:b}),getDeliveryFee:(a,c)=>{let d=b().settings.deliveryFees;return d[a]?d[a][c]:m(a,c)}}),c={name:"dattes-storage-v5",storage:i(()=>localStorage),version:5,migrate:(a,b)=>{if(b<5){let b=a.inventory||[],c=n.map(a=>{let c=b.find(b=>b.id===a.id);return c?{...a,stockKg:c.stockKg,pricePerKg:c.pricePerKg,images:c.images}:a});return{...a,inventory:c}}return a},partialize:a=>({language:a.language,cart:a.cart,settings:a.settings,currentUser:a.currentUser,users:a.users,totalVisits:a.totalVisits,analyticsData:a.analyticsData}),onRehydrateStorage:()=>a=>{a?.setHasHydrated(!0)}},(a,d,e)=>{let f,g={storage:i(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...c},h=!1,k=0,l=new Set,m=new Set,n=g.storage;if(!n)return b((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},d,e);let o=()=>{let a=g.partialize({...d()});return n.setItem(g.name,{state:a,version:g.version})},p=e.setState;e.setState=(a,b)=>(p(a,b),o());let q=b((...b)=>(a(...b),o()),d,e);e.getInitialState=()=>q;let r=()=>{var b,c;if(!n)return;let e=++k;h=!1,l.forEach(a=>{var b;return a(null!=(b=d())?b:q)});let i=(null==(c=g.onRehydrateStorage)?void 0:c.call(g,null!=(b=d())?b:q))||void 0;return j(n.getItem.bind(n))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(b=>{var c;if(e!==k)return;let[h,i]=b;if(a(f=g.merge(i,null!=(c=d())?c:q),!0),h)return o()}).then(()=>{e===k&&(null==i||i(f,void 0),f=d(),h=!0,m.forEach(a=>a(f)))}).catch(a=>{e===k&&(null==i||i(void 0,a))})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(n=a.storage)},clearStorage:()=>{null==n||n.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>r(),hasHydrated:()=>h,onHydrate:a=>(l.add(a),()=>{l.delete(a)}),onFinishHydration:a=>(m.add(a),()=>{m.delete(a)})},g.skipHydration||r(),f||q}))?h(f):h,Object.assign(e=a=>(function(a,b=a=>a){let c=g.default.useSyncExternalStore(a.subscribe,g.default.useCallback(()=>b(a.getState()),[a,b]),g.default.useCallback(()=>b(a.getInitialState()),[a,b]));return g.default.useDebugValue(c),c})(d,a),d),e);a.s(["useStore",0,o],68515)}];

//# sourceMappingURL=_624c3f51._.js.map