{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/dattes-dz/app/admin/layout.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ReactNode, useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport {\r\n    LayoutDashboard,\r\n    BarChart3,\r\n    ShoppingBag,\r\n    Package,\r\n    Users,\r\n    LogOut,\r\n    Menu,\r\n    X,\r\n    ChevronRight,\r\n    Store\r\n} from 'lucide-react';\r\nimport { useStore } from '@/lib/store';\r\n\r\nconst SIDEBAR_ITEMS = [\r\n    { title: 'Tableau de bord', icon: LayoutDashboard, href: '/admin' },\r\n    { title: 'Analytiques', icon: BarChart3, href: '/admin/analytics' },\r\n    { title: 'Commandes', icon: ShoppingBag, href: '/admin/orders' },\r\n    { title: 'Produits', icon: Package, href: '/admin/products' },\r\n    { title: 'Utilisateurs', icon: Users, href: '/admin/users' },\r\n];\r\n\r\nexport default function AdminLayout({ children }: { children: ReactNode }) {\r\n    const pathname = usePathname();\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n    const { logout, currentUser, _hasHydrated } = useStore();\r\n\r\n    // Prevent hydration mismatch\r\n    if (!_hasHydrated) {\r\n        return <div className=\"min-h-screen flex items-center justify-center text-dattes-primary font-bold\">Chargement...</div>;\r\n    }\r\n\r\n    if (!currentUser || currentUser.role !== 'admin') {\r\n        return (\r\n            <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-50 text-center p-4\">\r\n                <h1 className=\"text-2xl font-bold text-dattes-primary mb-4\">Accès Refusé</h1>\r\n                <p className=\"text-gray-500 mb-6\">Vous devez être administrateur pour accéder à cette page.</p>\r\n                <Link href=\"/login\" className=\"bg-dattes-primary text-white px-6 py-2 rounded-xl font-bold hover:bg-dattes-accent transition-colors\">\r\n                    Se Connecter\r\n                </Link>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#FDFCFB] flex\">\r\n            {/* Sidebar */}\r\n            <aside\r\n                className={`\r\n                    ${isSidebarOpen ? 'w-64' : 'w-20'} \r\n                    bg-white border-r border-gray-100 \r\n                    transition-all duration-300 \r\n                    flex flex-col \r\n                    fixed lg:sticky top-0 h-screen z-50\r\n                `}\r\n            >\r\n                <div className=\"p-6 flex items-center justify-between\">\r\n                    <div className={`flex items-center gap-2 font-display font-bold text-dattes-primary transition-opacity ${isSidebarOpen ? 'opacity-100' : 'opacity-0 w-0 overflow-hidden'}`}>\r\n                        {/* eslint-disable-next-line @next/next/no-img-element */}\r\n                        <img src=\"/logo-new.png\" alt=\"Admin\" className=\"h-8 w-auto object-contain\" />\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setIsSidebarOpen(!isSidebarOpen)}\r\n                        className=\"p-2 hover:bg-gray-50 rounded-lg transition-colors\"\r\n                    >\r\n                        {isSidebarOpen ? <X className=\"w-5 h-5 text-gray-400\" /> : <Menu className=\"w-5 h-5 text-gray-400\" />}\r\n                    </button>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 px-4 py-4 space-y-1 overflow-y-auto\">\r\n                    {SIDEBAR_ITEMS.map((item) => {\r\n                        const isActive = pathname === item.href;\r\n                        // Calculate badge for orders\r\n                        const pendingCount = item.href === '/admin/orders'\r\n                            ? (useStore.getState().orders?.filter(o => o.status === 'pending').length || 0)\r\n                            : 0;\r\n\r\n                        return (\r\n                            <Link\r\n                                key={item.href}\r\n                                href={item.href}\r\n                                className={`\r\n                                    flex items-center gap-3 px-4 py-3 rounded-xl transition-all group\r\n                                    ${isActive\r\n                                        ? 'bg-dattes-primary text-white shadow-lg shadow-dattes-primary/20'\r\n                                        : 'text-gray-500 hover:bg-gray-50'\r\n                                    }\r\n                                `}\r\n                            >\r\n                                <div className=\"relative\">\r\n                                    <item.icon className={`w-5 h-5 flex-shrink-0 transition-transform group-hover:scale-110 ${isActive ? 'text-white' : 'text-gray-400'}`} />\r\n                                    {/* Badge for collapsed state optional, but let's keep it simple for now or adding a dot? */}\r\n                                </div>\r\n\r\n                                {isSidebarOpen && (\r\n                                    <div className=\"flex flex-1 items-center justify-between min-w-0\">\r\n                                        <span className=\"font-bold text-sm tracking-wide whitespace-nowrap overflow-hidden text-ellipsis\">\r\n                                            {item.title}\r\n                                        </span>\r\n                                        {pendingCount > 0 && (\r\n                                            <span className=\"bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm ml-2 animate-pulse\">\r\n                                                {pendingCount}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                                {isActive && isSidebarOpen && <ChevronRight className=\"w-4 h-4 ml-auto opacity-50 flex-shrink-0\" />}\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </nav>\r\n\r\n                <div className=\"p-4 mt-auto border-t border-gray-50 space-y-2 bg-white\">\r\n                    <button\r\n                        onClick={logout}\r\n                        className=\"flex items-center gap-3 w-full px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 transition-all font-bold text-sm\"\r\n                    >\r\n                        <LogOut className=\"w-5 h-5 flex-shrink-0\" />\r\n                        {isSidebarOpen && <span>Déconnexion</span>}\r\n                    </button>\r\n\r\n                    {isSidebarOpen && currentUser && (\r\n                        <div className=\"p-3 bg-gray-50 rounded-xl flex items-center gap-3\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-dattes-accent/20 flex items-center justify-center text-dattes-primary font-bold text-xs\">\r\n                                {currentUser.name?.[0] || 'A'}\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                                <p className=\"text-xs font-bold text-gray-800 truncate\">{currentUser.name}</p>\r\n                                <p className=\"text-[10px] text-gray-400 truncate\">{currentUser.email}</p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className={`\r\n                flex-1 \r\n                transition-all duration-300\r\n                ${isSidebarOpen ? 'lg:ml-0' : 'lg:ml-0'} \r\n                ${isSidebarOpen ? 'ml-64' : 'ml-20'} \r\n                /* Mobile: Sidebar is fixed, so main needs padding. \r\n                   But wait, isSidebarOpen logic above toggles width. \r\n                   If fixed, main content stays under. \r\n                   We need to push main content on desktop, and maybe overlay on mobile? */\r\n                   lg:ml-0 /* Reset for flex behavior */\r\n            `}>\r\n                <div className=\"p-4 md:p-8 max-w-7xl mx-auto w-full\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n\r\n            {/* Mobile Overlay */}\r\n            {isSidebarOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-black/20 z-40 lg:hidden\"\r\n                    onClick={() => setIsSidebarOpen(false)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}