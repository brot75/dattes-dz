{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/dattes-dz/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useStore } from '@/lib/store';\r\nimport { ArrowRight, ArrowLeft } from 'lucide-react';\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n    const { login, register, language } = useStore();\r\n    const [isLogin, setIsLogin] = useState(true);\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const isRtl = language === 'ar';\r\n\r\n    const t = {\r\n        titleLogin: isRtl ? 'تسجيل الدخول' : 'Connexion',\r\n        titleRegister: isRtl ? 'إنشاء حساب' : 'Créer un compte',\r\n        subtitleLogin: isRtl ? 'مرحبًا بك مجددًا في تمور الجزائر' : 'Bienvenue chez Abdattes',\r\n        subtitleRegister: isRtl ? 'انضم إلينا للاستمتاع بأجود التمور' : 'Rejoignez-nous pour savourer l\\'excellence',\r\n        email: isRtl ? 'البريد الإلكتروني' : 'Email Address',\r\n        password: isRtl ? 'كلمة المرور' : 'Password',\r\n        name: isRtl ? 'الاسم الكامل' : 'Full Name',\r\n        phone: isRtl ? 'رقم الهاتف' : 'Numéro de Téléphone',\r\n        ctaLogin: isRtl ? 'دخول' : 'Se connecter',\r\n        ctaRegister: isRtl ? 'تسجيل' : 'S\\'inscrire',\r\n        toggleLogin: isRtl ? 'ليس لديك حساب؟' : 'Pas encore de compte ?',\r\n        toggleRegister: isRtl ? 'لديك حساب بالفعل؟' : 'Déjà un compte ?',\r\n        back: isRtl ? 'عودة' : 'Retour'\r\n    };\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (isLogin) {\r\n            const success = login(email.trim(), password.trim());\r\n            if (success) {\r\n                // Check role via store directly since state update might be async but we can peek or check the user found\r\n                // Actually `login` updates state synchronously in Zustand usually, but let's access the found user to be safe\r\n                // or just read from store immediately after\r\n                const user = useStore.getState().currentUser;\r\n                // Force state persistence check\r\n                console.log('Login successful. Current User:', user);\r\n                setTimeout(() => {\r\n                    if (user?.role === 'admin') {\r\n                        console.log('Redirecting to Admin...');\r\n                        window.location.href = '/admin';\r\n                    } else {\r\n                        console.log('Redirecting to Home...');\r\n                        window.location.href = '/';\r\n                    }\r\n                }, 800); // Increased delay to ensure localStorage write\r\n            } else {\r\n                setError('Email ou mot de passe incorrect.');\r\n            }\r\n        } else {\r\n            const success = register({ id: '', email, password, name, phone, role: 'customer' });\r\n            if (success) {\r\n                // Auto login after register\r\n                login(email, password);\r\n                router.push('/');\r\n            } else {\r\n                setError('Cet email est déjà utilisé.');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-white font-sans\">\r\n            {/* Left Side - Visual */}\r\n            <div className=\"hidden lg:flex w-1/2 bg-dattes-primary relative overflow-hidden items-center justify-center text-center p-12\">\r\n                <div\r\n                    className=\"absolute inset-0 opacity-20 bg-cover bg-center mix-blend-overlay\"\r\n                    style={{ backgroundImage: \"url('/hero-dates-v2.png')\" }}\r\n                />\r\n                <div className=\"relative z-10 text-white max-w-lg\">\r\n                    <h1 className=\"text-6xl font-display font-bold mb-6 text-dattes-accent\">Abdattes</h1>\r\n                    <p className=\"text-xl opacity-90 leading-relaxed font-light\">Le goût authentique du Sahara algérien, livré directement chez vous.</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Side - Form */}\r\n            <div className=\"w-full lg:w-1/2 flex flex-col justify-center items-center p-8 md:p-12 relative\">\r\n                <Link href=\"/\" className=\"absolute top-8 left-8 flex items-center gap-2 text-gray-500 hover:text-dattes-primary transition-colors text-sm font-bold\">\r\n                    <ArrowLeft className=\"w-4 h-4\" /> {t.back}\r\n                </Link>\r\n\r\n                <div className=\"w-full max-w-md space-y-8\">\r\n                    <div className=\"text-center\">\r\n                        <h2 className=\"text-3xl font-display font-bold text-dattes-primary mb-2\">\r\n                            {isLogin ? t.titleLogin : t.titleRegister}\r\n                        </h2>\r\n                        <p className=\"text-gray-500\">{isLogin ? t.subtitleLogin : t.subtitleRegister}</p>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        {error && (\r\n                            <div className=\"bg-red-50 text-red-500 text-sm p-3 rounded-lg text-center font-bold\">\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        {!isLogin && (\r\n                            <>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-1\">{t.name}</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        required\r\n                                        className=\"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-dattes-accent/50 transition-all\"\r\n                                        value={name}\r\n                                        onChange={(e) => setName(e.target.value)}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-bold text-gray-700 mb-1\">{t.phone}</label>\r\n                                    <input\r\n                                        type=\"tel\"\r\n                                        required\r\n                                        className=\"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-dattes-accent/50 transition-all\"\r\n                                        value={phone}\r\n                                        onChange={(e) => setPhone(e.target.value)}\r\n                                        placeholder=\"05 XX XX XX XX\"\r\n                                    />\r\n                                </div>\r\n                            </>\r\n                        )}\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-1\">{t.email}</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                required\r\n                                className=\"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-dattes-accent/50 transition-all\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-1\">{t.password}</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                required\r\n                                className=\"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-dattes-accent/50 transition-all\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"w-full bg-dattes-primary text-white font-bold py-3 rounded-xl hover:bg-dattes-accent hover:text-dattes-primary transition-all flex items-center justify-center gap-2 group\"\r\n                        >\r\n                            {isLogin ? t.ctaLogin : t.ctaRegister}\r\n                            <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"text-center\">\r\n                        <p className=\"text-sm text-gray-600\">\r\n                            {isLogin ? t.toggleLogin : t.toggleRegister}{' '}\r\n                            <button\r\n                                onClick={() => setIsLogin(!isLogin)}\r\n                                className=\"text-dattes-primary font-bold hover:underline\"\r\n                            >\r\n                                {isLogin ? t.ctaRegister : t.ctaLogin}\r\n                            </button>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}