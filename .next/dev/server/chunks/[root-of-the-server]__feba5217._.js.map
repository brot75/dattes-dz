{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/dattes-dz/app/api/products/route.ts"],"sourcesContent":["\r\nimport { NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nconst DATA_FILE = path.join(process.cwd(), 'data', 'products.json');\r\n\r\n// Helper to read data\r\nconst readData = () => {\r\n    try {\r\n        if (!fs.existsSync(DATA_FILE)) return [];\r\n        const fileData = fs.readFileSync(DATA_FILE, 'utf-8');\r\n        return JSON.parse(fileData);\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n};\r\n\r\n// Helper to write data\r\nconst writeData = (data: any) => {\r\n    try {\r\n        fs.writeFileSync(DATA_FILE, JSON.stringify(data, null, 4));\r\n        return true;\r\n    } catch (error) {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport async function GET() {\r\n    const products = readData();\r\n    return NextResponse.json(products);\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        // Body should be the FULL new inventory array to completely replace it\r\n        // Or we could handle partial updates, but for simplicity of syncing with store, we replace.\r\n        if (Array.isArray(body)) {\r\n            writeData(body);\r\n            return NextResponse.json({ success: true, message: 'Inventory updated', data: body });\r\n        }\r\n        return NextResponse.json({ success: false, message: 'Invalid format' }, { status: 400 });\r\n    } catch (error) {\r\n        return NextResponse.json({ success: false, message: 'Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;AACA;;;;AAEO,MAAM,UAAU;AAEvB,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEnD,sBAAsB;AACtB,MAAM,WAAW;IACb,IAAI;QACA,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,YAAY,OAAO,EAAE;QACxC,MAAM,WAAW,wGAAE,CAAC,YAAY,CAAC,WAAW;QAC5C,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,OAAO,EAAE;IACb;AACJ;AAEA,uBAAuB;AACvB,MAAM,YAAY,CAAC;IACf,IAAI;QACA,wGAAE,CAAC,aAAa,CAAC,WAAW,KAAK,SAAS,CAAC,MAAM,MAAM;QACvD,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,OAAO;IACX;AACJ;AAEO,eAAe;IAClB,MAAM,WAAW;IACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,uEAAuE;QACvE,4FAA4F;QAC5F,IAAI,MAAM,OAAO,CAAC,OAAO;YACrB,UAAU;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS;gBAAqB,MAAM;YAAK;QACvF;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS;QAAiB,GAAG;YAAE,QAAQ;QAAI;IAC1F,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS;QAAe,GAAG;YAAE,QAAQ;QAAI;IACxF;AACJ"}}]
}