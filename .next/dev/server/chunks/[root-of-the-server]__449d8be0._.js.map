{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/dattes-dz/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from 'firebase/app';\r\nimport { getStorage } from 'firebase/storage';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyD5Z-beYBUJS5kL0VjftPizpahVrP5Od44\",\r\n    authDomain: \"abdattes-production-2026.firebaseapp.com\",\r\n    projectId: \"abdattes-production-2026\",\r\n    storageBucket: \"abdattes-production-2026.firebasestorage.app\",\r\n    messagingSenderId: \"1010651736384\",\r\n    appId: \"1:1010651736384:web:2476a3f0474d76a110f2a5\"\r\n};\r\n\r\n// Initialize Firebase (Singleton pattern)\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\n\r\nexport const storage = getStorage(app);\r\nexport const db = getFirestore(app);\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACnB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACX;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,6KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,mLAAa,EAAC,kBAAkB,IAAA,6KAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,UAAU,IAAA,oMAAU,EAAC;AAC3B,MAAM,KAAK,IAAA,mLAAY,EAAC"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/dattes-dz/app/api/orders/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, doc, setDoc, orderBy, query } from 'firebase/firestore';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nexport async function GET() {\r\n    try {\r\n        const q = query(collection(db, 'orders'), orderBy('date', 'desc'));\r\n        const querySnapshot = await getDocs(q);\r\n        const orders = querySnapshot.docs.map(doc => doc.data());\r\n        return NextResponse.json(orders);\r\n    } catch (error) {\r\n        console.error('Firestore get orders error:', error);\r\n        return NextResponse.json([]);\r\n    }\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n\r\n        // Scenario 1: New Single Order (Client Checkout) or Status Update (Admin)\r\n        if (typeof body === 'object' && body.id && !Array.isArray(body)) {\r\n            await setDoc(doc(db, 'orders', body.id), body, { merge: true });\r\n            return NextResponse.json({ success: true, message: 'Order saved', data: body });\r\n        }\r\n\r\n        // Scenario 2: Full Sync (Legacy/Dev) - Handle bulk array\r\n        else if (Array.isArray(body)) {\r\n            const batchPromises = body.map(order =>\r\n                setDoc(doc(db, 'orders', order.id), order, { merge: true })\r\n            );\r\n            await Promise.all(batchPromises);\r\n            return NextResponse.json({ success: true, message: 'Orders synced', data: body });\r\n        }\r\n\r\n        return NextResponse.json({ success: false, message: 'Invalid format' }, { status: 400 });\r\n    } catch (error) {\r\n        console.error('Firestore save order error:', error);\r\n        return NextResponse.json({ success: false, message: 'Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AAAA;;;;AAEO,MAAM,UAAU;AAEhB,eAAe;IAClB,IAAI;QACA,MAAM,IAAI,IAAA,4KAAK,EAAC,IAAA,iLAAU,EAAC,uHAAE,EAAE,WAAW,IAAA,8KAAO,EAAC,QAAQ;QAC1D,MAAM,gBAAgB,MAAM,IAAA,8KAAO,EAAC;QACpC,MAAM,SAAS,cAAc,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI;QACrD,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC,EAAE;IAC/B;AACJ;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,0EAA0E;QAC1E,IAAI,OAAO,SAAS,YAAY,KAAK,EAAE,IAAI,CAAC,MAAM,OAAO,CAAC,OAAO;YAC7D,MAAM,IAAA,6KAAM,EAAC,IAAA,0KAAG,EAAC,uHAAE,EAAE,UAAU,KAAK,EAAE,GAAG,MAAM;gBAAE,OAAO;YAAK;YAC7D,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS;gBAAe,MAAM;YAAK;QACjF,OAGK,IAAI,MAAM,OAAO,CAAC,OAAO;YAC1B,MAAM,gBAAgB,KAAK,GAAG,CAAC,CAAA,QAC3B,IAAA,6KAAM,EAAC,IAAA,0KAAG,EAAC,uHAAE,EAAE,UAAU,MAAM,EAAE,GAAG,OAAO;oBAAE,OAAO;gBAAK;YAE7D,MAAM,QAAQ,GAAG,CAAC;YAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS;gBAAiB,MAAM;YAAK;QACnF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS;QAAiB,GAAG;YAAE,QAAQ;QAAI;IAC1F,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS;QAAe,GAAG;YAAE,QAAQ;QAAI;IACxF;AACJ"}}]
}