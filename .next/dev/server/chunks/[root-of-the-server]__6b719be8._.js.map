{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/xampp/htdocs/dattes-dz/app/api/orders/route.ts"],"sourcesContent":["\r\nimport { NextResponse } from 'next/server';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nconst DATA_FILE = path.join(process.cwd(), 'data', 'orders.json');\r\n\r\nconst readData = () => {\r\n    try {\r\n        if (!fs.existsSync(DATA_FILE)) return [];\r\n        const fileData = fs.readFileSync(DATA_FILE, 'utf-8');\r\n        return JSON.parse(fileData);\r\n    } catch (error) {\r\n        return [];\r\n    }\r\n};\r\n\r\nconst writeData = (data: any) => {\r\n    try {\r\n        fs.writeFileSync(DATA_FILE, JSON.stringify(data, null, 4));\r\n        return true;\r\n    } catch (error) {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport async function GET() {\r\n    const orders = readData();\r\n    return NextResponse.json(orders);\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        // If array, replace all (sync full state)\r\n        if (Array.isArray(body)) {\r\n            writeData(body);\r\n            return NextResponse.json({ success: true, message: 'Orders synced', data: body });\r\n        }\r\n        // If object, append (new order)\r\n        else if (typeof body === 'object' && body.id) {\r\n            const current = readData();\r\n            const updated = [body, ...current];\r\n            writeData(updated);\r\n            return NextResponse.json({ success: true, message: 'Order added', data: updated });\r\n        }\r\n        return NextResponse.json({ success: false, message: 'Invalid format' }, { status: 400 });\r\n    } catch (error) {\r\n        return NextResponse.json({ success: false, message: 'Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;AACA;;;;AAEO,MAAM,UAAU;AAEvB,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAEnD,MAAM,WAAW;IACb,IAAI;QACA,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,YAAY,OAAO,EAAE;QACxC,MAAM,WAAW,wGAAE,CAAC,YAAY,CAAC,WAAW;QAC5C,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,OAAO,EAAE;IACb;AACJ;AAEA,MAAM,YAAY,CAAC;IACf,IAAI;QACA,wGAAE,CAAC,aAAa,CAAC,WAAW,KAAK,SAAS,CAAC,MAAM,MAAM;QACvD,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,OAAO;IACX;AACJ;AAEO,eAAe;IAClB,MAAM,SAAS;IACf,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,0CAA0C;QAC1C,IAAI,MAAM,OAAO,CAAC,OAAO;YACrB,UAAU;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS;gBAAiB,MAAM;YAAK;QACnF,OAEK,IAAI,OAAO,SAAS,YAAY,KAAK,EAAE,EAAE;YAC1C,MAAM,UAAU;YAChB,MAAM,UAAU;gBAAC;mBAAS;aAAQ;YAClC,UAAU;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAM,SAAS;gBAAe,MAAM;YAAQ;QACpF;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS;QAAiB,GAAG;YAAE,QAAQ;QAAI;IAC1F,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,SAAS;QAAe,GAAG;YAAE,QAAQ;QAAI;IACxF;AACJ"}}]
}