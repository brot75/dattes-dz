(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let r=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],7233)},48380,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(4421),s=e.i(7233);let l=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var i=e.i(37727);function d(){let{inventory:e,updateInventory:d}=(0,a.useStore)(),[o,n]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[x,g]=(0,t.useState)("fr"),[p,m]=(0,t.useState)({type:"Deglet Nour",quality:"Premium",pricePerKg:1e3,stockKg:100,origin:"Biskra",description:"",unit:"kg",packaging:"standard",images:["/products/deglet-nour.png"]});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-dattes-primary",children:"Gestion des Produits"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"GÃ©rer l'inventaire et les prix"})]}),(0,r.jsxs)("button",{onClick:()=>{u(null),m({type:"Deglet Nour",quality:"Premium",pricePerKg:1e3,stockKg:100,origin:"Biskra",description:"",unit:"kg",packaging:"standard",images:["/products/deglet-nour.png"]}),n(!0)},className:"flex items-center gap-2 px-4 py-2 bg-dattes-primary text-white rounded-lg text-sm font-bold hover:bg-gray-800 transition-colors shadow-lg shadow-dattes-primary/20",children:[(0,r.jsx)(s.Plus,{className:"w-4 h-4"})," Ajouter Produit"]})]}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-left",children:[(0,r.jsx)("thead",{className:"bg-gray-50/50 text-xs uppercase text-gray-400 font-extrabold tracking-wider border-b border-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4",children:"Produit"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Origine"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Prix (DA/Kg)"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"Stock (Kg)"}),(0,r.jsx)("th",{className:"px-6 py-4",children:"DÃ©tails"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map(t=>(0,r.jsxs)("tr",{className:`group hover:bg-gray-50 transition-colors ${t.stockKg<50?"bg-red-50/30":""}`,children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gray-100 overflow-hidden flex-shrink-0 border border-gray-200",children:(0,r.jsx)("img",{src:t.images[0],alt:t.type,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-dattes-primary",children:t.type}),(0,r.jsx)("div",{className:"text-xs text-dattes-accent font-bold px-2 py-0.5 bg-dattes-accent/10 rounded-full w-fit mt-1",children:t.quality})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-bold text-gray-600",children:t.origin||"-"}),(0,r.jsx)("td",{className:"px-6 py-4 font-bold text-dattes-primary",children:t.pricePerKg}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:`font-bold ${t.stockKg<50?"text-red-500":"text-gray-700"}`,children:t.stockKg})}),(0,r.jsx)("td",{className:"px-6 py-4 text-xs text-gray-500 max-w-xs truncate",children:t.description}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>{m(t),u(t.id),n(!0)},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-500 hover:text-blue-700 transition-colors",title:"Modifier",children:(0,r.jsx)(l,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>{var r;return r=t.id,void(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce produit ?")&&d(e.filter(e=>e.id!==r)))},className:"p-2 hover:bg-red-50 rounded-lg text-red-400 hover:text-red-600 transition-colors",title:"Supprimer",children:(0,r.jsx)(i.X,{className:"w-5 h-5"})})]})})]},t.id))})]})})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-8 animate-in fade-in zoom-in duration-200 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-dattes-primary",children:c?"Modifier Produit":"Ajouter Produit"}),(0,r.jsx)("button",{onClick:()=>n(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,r.jsx)(i.X,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault();let t=[...e];c?t=t.map(e=>e.id===c?{...e,...p}:e):t.push({...p,id:crypto.randomUUID(),images:p.images||["/products/deglet-nour.png"]}),d(t),n(!1),u(null),m({type:"Deglet Nour",quality:"Premium",pricePerKg:1e3,stockKg:100,origin:"Biskra",description:"",unit:"kg",packaging:"standard",images:["/products/deglet-nour.png"]})},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex bg-gray-100 p-1 rounded-xl w-fit",children:[(0,r.jsx)("button",{type:"button",onClick:()=>g("fr"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${"fr"===x?"bg-white shadow text-dattes-primary":"text-gray-400 hover:text-gray-600"}`,children:"FranÃ§ais"}),(0,r.jsx)("button",{type:"button",onClick:()=>g("ar"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${"ar"===x?"bg-white shadow text-dattes-primary":"text-gray-400 hover:text-gray-600"}`,children:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Image"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[p.images&&p.images[0]&&(0,r.jsx)("img",{src:p.images[0],alt:"Preview",className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),(0,r.jsx)("input",{type:"file",accept:"image/*",className:"w-full p-2 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-dattes-primary file:text-white hover:file:bg-dattes-accent transition-all",onChange:e=>{let r=e.target.files?.[0];if(r){let e=new FileReader;e.onload=e=>{let r=new Image;r.onload=()=>{let e=document.createElement("canvas"),t=r.width,a=r.height;t>1200&&(a*=1200/t,t=1200),e.width=t,e.height=a;let s=e.getContext("2d");s?.drawImage(r,0,0,t,a);let l=e.toDataURL("image/jpeg",.8);m({...p,images:[l]})},r.src=e.target?.result},e.readAsDataURL(r)}}})]}),(0,r.jsx)("input",{type:"text",placeholder:"Ou URL directe (ex: /img.png)",className:"mt-2 w-full p-2 text-xs bg-gray-50 rounded-lg border border-gray-200",value:p.images?.[0]||"",onChange:e=>m({...p,images:[e.target.value]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:["Type (VariÃ©tÃ©) ","ar"===x?"(Arabe)":""]}),(0,r.jsx)("input",{required:"fr"===x,className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent",value:"fr"===x?p.type:p.typeAr||"",onChange:e=>"fr"===x?m({...p,type:e.target.value}):m({...p,typeAr:e.target.value}),placeholder:"fr"===x?"ex: Deglet Nour":"Ù…Ø«Ø§Ù„: Ø¯Ù‚Ù„Ø© Ù†ÙˆØ±",dir:"ar"===x?"rtl":"ltr"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:["QualitÃ© ","ar"===x?"(Arabe)":""]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",{className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent",value:"fr"===x?p.quality:p.qualityAr||"",onChange:e=>"fr"===x?m({...p,quality:e.target.value}):m({...p,qualityAr:e.target.value}),placeholder:"fr"===x?"ex: Premium":"Ù…Ø«Ø§Ù„: Ù…Ù…ØªØ§Ø²",dir:"ar"===x?"rtl":"ltr"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:("fr"===x?["Premium","Standard","Ravier","Vrac"]:["Ù…Ù…ØªØ§Ø²","Ø¹Ø§Ø¯ÙŠ","Ø¹Ù„ÙŠÙˆÙ†","ÙØ±Ø§ÙƒØ©"]).map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>"fr"===x?m({...p,quality:e}):m({...p,qualityAr:e}),className:"px-3 py-1 text-xs font-bold bg-dattes-primary/5 text-dattes-primary rounded-full hover:bg-dattes-primary hover:text-white transition-colors",children:e},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Prix (DA/Kg)"}),(0,r.jsx)("input",{type:"number",required:!0,className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent",value:p.pricePerKg,onChange:e=>m({...p,pricePerKg:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:["Stock (",p.unit||"Kg",")"]}),(0,r.jsx)("input",{type:"number",value:p.stockKg,onChange:e=>m({...p,stockKg:Number(e.target.value)}),className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent font-bold"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:["Origine ","ar"===x?"(Arabe)":""]}),(0,r.jsx)("input",{className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent",value:"fr"===x?p.origin:p.originAr||"",onChange:e=>"fr"===x?m({...p,origin:e.target.value}):m({...p,originAr:e.target.value}),placeholder:"fr"===x?"ex: Tolga":"Ù…Ø«Ø§Ù„: Ø·ÙˆÙ„Ù‚Ø©",dir:"ar"===x?"rtl":"ltr"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"UnitÃ©"}),(0,r.jsxs)("select",{value:p.unit||"kg",onChange:e=>m({...p,unit:e.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent font-bold",children:[(0,r.jsx)("option",{value:"kg",children:"Kg"}),(0,r.jsx)("option",{value:"liter",children:"Litre"}),(0,r.jsx)("option",{value:"piece",children:"PiÃ¨ce"}),(0,r.jsx)("option",{value:"box",children:"BoÃ®te"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Conditionnement"}),(0,r.jsxs)("select",{value:p.packaging||"standard",onChange:e=>m({...p,packaging:e.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent font-bold",children:[(0,r.jsx)("option",{value:"standard",children:"Standard (Vrac)"}),(0,r.jsx)("option",{value:"arjoun",children:"Arjoun (RÃ©gime)"}),(0,r.jsx)("option",{value:"messier",children:"Messier (EmpilÃ©)"}),(0,r.jsx)("option",{value:"box",children:"Carton (BoÃ®te)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:["Description Courte ","ar"===x?"(Arabe)":""]}),(0,r.jsx)("textarea",{className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:border-dattes-accent h-24",value:"fr"===x?p.description:p.descriptionAr||"",onChange:e=>"fr"===x?m({...p,description:e.target.value}):m({...p,descriptionAr:e.target.value}),dir:"ar"===x?"rtl":"ltr"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Image du Produit"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden border border-gray-200",children:(0,r.jsx)("img",{src:p.images?.[0]||"/products/deglet-nour.png",alt:"Preview",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)("input",{type:"file",onChange:async e=>{let r=e.target.files?.[0];if(!r)return;let t=new FormData;t.append("file",r);try{let e=await fetch("/api/upload",{method:"POST",body:t});if(!e.ok)throw Error("Upload failed");let r=await e.json();m({...p,images:[r.url]})}catch(e){console.error("Error uploading image:",e),alert("Erreur lors de l'upload de l'image. Veuillez rÃ©essayer.")}},className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",accept:"image/*"}),(0,r.jsxs)("div",{className:"w-full p-3 bg-gray-50 rounded-xl border border-gray-200 text-gray-400 text-sm font-bold flex items-center justify-between",children:[(0,r.jsx)("span",{children:"ðŸ“· Cliquer pour uploader une image"}),(0,r.jsx)(s.Plus,{className:"w-4 h-4"})]})]})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-dattes-primary text-white font-bold py-4 rounded-xl shadow-lg hover:bg-black transition-colors",children:c?"Sauvegarder modifications":"CrÃ©er Produit"})]})]})})]})}e.s(["default",()=>d],48380)}]);